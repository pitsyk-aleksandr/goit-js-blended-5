{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/localStorageApi.js","../src/js/theme.js","../src/js/renderTasks.js","../src/main.js"],"sourcesContent":["// refs.js — для зберігання посилань на DOM елементи.\nconst refs = {\n  btnToggleTheme: document.querySelector('.btn-toggle-theme'),\n  formAddTask: document.querySelector('.form-add-task'),\n  newTaskName: document.querySelector('#task-name'),\n  newTaskDescr: document.querySelector('#task-description'),\n  btnAddTask: document.querySelector('.btn-add-task'),\n  taskList: document.querySelector('#task-list'),\n};\n\nexport default refs;\n","// localStorageApi.js — для збереження та завантаження завдань у локальному сховищі.\n\n// =========================================================================\n// addNewTask(taskName, taskText);\n// Функція - Додати нове завдання в LocalStorage\n// -------------------------------------------------------------------------\nexport function addNewTask(taskName, taskDescr) {\n  // Отримуємо список задач\n  let tasks = getTasks();\n  let taskLastId = getTaskLastId();\n\n  // Якщо список задач пустий, то створюється новий масив\n  if (tasks === null) {\n    tasks = [];\n    taskLastId = 0;\n  }\n  taskLastId = taskLastId + 1;\n\n  // Додаємо задачу до масиву списка задач\n  tasks.push({ id: taskLastId, name: taskName, description: taskDescr });\n\n  // Додаємо масив зі списком задач в LocalStorage\n  localStorage.setItem('tasks', JSON.stringify(tasks));\n\n  localStorage.setItem('lastId', JSON.stringify(taskLastId));\n}\n// =========================================================================\n\n// =========================================================================\n// getTasks()\n// Отримання масиву задач з LocalStorage\n// -------------------------------------------------------------------------\nexport function getTasks() {\n  const tasksStr = localStorage.getItem('tasks');\n  return JSON.parse(tasksStr);\n}\n// =========================================================================\n\n// =========================================================================\n// getTaskLastId()\n// Отримання індекса останньої задачі з LocalStorage\n// -------------------------------------------------------------------------\nexport function getTaskLastId() {\n  const taskLastIdStr = localStorage.getItem('lastId');\n  return JSON.parse(taskLastIdStr);\n}\n// =========================================================================\n\n// =========================================================================\n// delTaskById(id)\n// Видалення задачі з LocalStorage по індексу\n// -------------------------------------------------------------------------\nexport function delTaskById(id) {\n  // Отримуємо список задач\n  let tasks = getTasks();\n\n  return JSON.parse(taskLastIdStr);\n}\n// =========================================================================\n\n\n","// Файл для роботи з кольоровою темою\n\n// =========================================================================\n// setThemeLS(theme);\n// Функція  - Встановити нову тему в LocalStorage\n// Отримує  - символьне значення встановленої теми\n// Повертає - нічого\n// -------------------------------------------------------------------------\nexport function setThemeLS(theme) {\n  localStorage.setItem('theme', theme);\n}\n// =========================================================================\n\n// =========================================================================\n// getThemeLS()\n// Функція  - Отримання теми з LocalStorage\n// Отримує  - нічого\n// Повертає - символьне значення встановленої теми\n// -------------------------------------------------------------------------\nexport function getThemeLS() {\n  let themeCurrent = localStorage.getItem('theme');\n  // Якщо схеми кольорів ще немає в LocalStorage, встановлюємо 'light' за замовчуванням\n  if (themeCurrent === null) {\n    themeCurrent = 'light';\n    setThemeLS(themeCurrent);\n  }\n  return themeCurrent;\n}\n// =========================================================================\n\n// =========================================================================\n// setThemeBody(theme);\n// Функція  - Встановити нову тему в body\n// Отримує  - символьне значення встановленої теми\n// Повертає - нічого\n// -------------------------------------------------------------------------\nexport function setThemeBody(theme) {\n  // Встановлюємо схему кольору - значення data-аргумента в body\n  if (theme === 'dark') {\n    document.body.setAttribute('data-theme', 'dark');\n  } else {\n    document.body.setAttribute('data-theme', 'light');\n  }\n}\n// =========================================================================\n","// renderTasks.js — для роботи з DOM (додавання та видалення елементів).\n\n// import refs from './refs';\n\n// =========================================================================\n// renderTasks(tasks)\n// Отримує  - масив з завданнями\n// Повертає - розмітку для списку завдань\n// -------------------------------------------------------------------------\nexport function renderTasks(tasks) {\n  // Створює розмітку\n  let markup = tasks\n    .map(task => {\n      return `\n        <li class=\"task-item\" id=\"${task.id}\">\n          <div class=\"task-content\">\n            <p class=\"id\">${task.id}</p>\n            <p class=\"name\">${task.name}</p>\n            <p class=\"description\">${task.description}</p>\n          </div>\n          <button type=\"button\" class=\"btn-delete-task\">Delete</button>\n        </li>`;\n    })\n    .join('');\n\n  // Повертає розмітку\n  return markup;\n}\n\n// =========================================================================\n","// main.js — для ініціалізації застосунку та основної логіки\n\nimport refs from './js/refs';\n\nimport { addNewTask, getTasks } from './js/localStorageApi';\n\nimport { setThemeLS, getThemeLS, setThemeBody } from './js/theme';\n\nimport { renderTasks } from './js/renderTasks';\n\nimport {} from './js/tasks';\n\n// Отримання поточної схеми з LocalStorage\n// та встановлюємо кольорову тему для body\nsetThemeBody(getThemeLS());\n\n// Отримуємо список задач з LocalStorage\nlet tasks = getTasks();\n\n// Якщо список задач НЕ пустий, то створюється новий масив\nif (tasks !== null) {\n  // Створюємо розмітку для задач, які є в LocalStorage\n  let markup = renderTasks(tasks);\n\n  // Додаємо розмітку в HTML для всіх задач з масиву\n  refs.taskList.insertAdjacentHTML('beforeend', markup);\n}\n\n// Слухач події на формі\nrefs.formAddTask.addEventListener('submit', onFormSubmit);\n\n// Обробник події форми вводу\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const taskName = refs.newTaskName.value.trim();\n  refs.newTaskName.value = taskName;\n  const taskDescr = refs.newTaskDescr.value.trim();\n  refs.newTaskDescr.value = taskDescr;\n  console.log(`taskName`, taskName);\n  console.log(`taskDescr`, taskDescr);\n  if (taskName === '' || taskDescr === '') {\n    console.log(`ERROR`);\n    return;\n  }\n  // Додати нове завдання в LocalStorage\n  addNewTask(taskName, taskDescr);\n\n  // Видалити ВСІ задачі зі списку на сайті (очистити ul id=\"task-list\")\n  refs.taskList.innerHTML = '';\n\n  // Отримуємо список задач з LocalStorage\n  let tasks = getTasks();\n\n  // Створюємо розмітку для задач, які є в LocalStorage\n  let markup = renderTasks(tasks);\n\n  // Додаємо розмітку в HTML для всіх задач з масиву\n  refs.taskList.insertAdjacentHTML('beforeend', markup);\n\n  // Перезагорузка форми вводу\n  refs.formAddTask.reset();\n}\n\n// Слухач подій на списку завдань\nrefs.taskList.addEventListener('click', onTaskListClick);\n\n// =========================================================================\n// Обробник подій при клікі на кнопку списка завдань\nfunction onTaskListClick(event) {\n  // Перевірка, що нажата саме кнопка\n  if (event.target.tagName !== 'BUTTON') {\n    return;\n  }\n\n  // Повертаємо батьківський елемент li, в якому знаходиться кнопка\n  const itemLiEl = event.target.closest('li');\n\n  // Знаходимо id цього елемента\n  const itemId = Number(itemLiEl.id);\n\n  // Отримуємо список задач з LocalStorage\n  let tasks = getTasks();\n  console.log(`tasks`, tasks);\n\n  // Фільтруємо масив, видаляючи з масива об'єкт з вибраним id\n  let newTasks = tasks.filter(task => task.id !== itemId);\n  console.log(`newTasks`, newTasks);\n\n  // Перезаписуємо новий масив зі списком задач в LocalStorage\n  localStorage.setItem('tasks', JSON.stringify(newTasks));\n\n  // Видалити ВСІ задачі зі списку на сайті (очистити ul id=\"task-list\")\n  refs.taskList.innerHTML = '';\n\n  // Отримуємо новий список задач з LocalStorage\n  // tasks = getTasks();\n\n  // Створюємо розмітку для задач, які є в LocalStorage\n  let markup = renderTasks(newTasks);\n\n  // Додаємо розмітку в HTML для всіх задач з масиву\n  refs.taskList.insertAdjacentHTML('beforeend', markup);\n}\n\n// Зміна кольорової теми\nrefs.btnToggleTheme.addEventListener('click', onToggleTheme);\n\nfunction onToggleTheme(event) {\n  // Отримання поточної схеми з LocalStorage\n  let themeCurrent = getThemeLS();\n  // Змінна нової теми\n  let themeNew;\n\n  // Зміна схеми кольору - значення data-аргумента в body\n  // Переключаем атрибут data-theme между light и dark\n  if (themeCurrent === 'dark') {\n    themeNew = 'light';\n  } else {\n    themeNew = 'dark';\n  }\n  // Встановлюємо нову тему на body\n  setThemeBody(themeNew);\n  // Встановлюємо нову тему на LocalStorage\n  setThemeLS(themeNew);\n}\n"],"names":["refs","addNewTask","taskName","taskDescr","tasks","getTasks","taskLastId","getTaskLastId","tasksStr","taskLastIdStr","setThemeLS","theme","getThemeLS","themeCurrent","setThemeBody","renderTasks","task","markup","onFormSubmit","event","onTaskListClick","itemLiEl","itemId","newTasks","onToggleTheme","themeNew"],"mappings":"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"}